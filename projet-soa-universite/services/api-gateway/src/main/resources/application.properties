spring.application.name=api-gateway
server.port=8080

# -------------------------
# student-service (Node)
# -------------------------
spring.cloud.gateway.routes[0].id=student-service
spring.cloud.gateway.routes[0].uri=http://student-service:8082
spring.cloud.gateway.routes[0].predicates[0]=Path=/students/**

# If your service expects /students/... already, no rewrite needed.
# If it expects /... without prefix, uncomment the next line:
# spring.cloud.gateway.routes[0].filters[0]=RewritePath=/students/(?<segment>.*), /$\{segment}

# -------------------------
# grade-service (FastAPI)
# -------------------------
spring.cloud.gateway.routes[1].id=grade-service
spring.cloud.gateway.routes[1].uri=http://grade-service:8084
spring.cloud.gateway.routes[1].predicates[0]=Path=/grades/**

# Same note as above:
# spring.cloud.gateway.routes[1].filters[0]=RewritePath=/grades/(?<segment>.*), /$\{segment}

# -------------------------
# auth-service (Spring)
# -------------------------
spring.cloud.gateway.routes[2].id=auth-service
spring.cloud.gateway.routes[2].uri=http://auth-service:8081
spring.cloud.gateway.routes[2].predicates[0]=Path=/auth/**

# If auth-service endpoints are actually /login, /register, etc. without /auth prefix:
# spring.cloud.gateway.routes[2].filters[0]=RewritePath=/auth/(?<segment>.*), /$\{segment}

# -------------------------
# course-service (JAX-WS SOAP)
# you publish: /CourseService?wsdl
# so we MUST strip /courses
# -------------------------
spring.cloud.gateway.routes[3].id=course-service
spring.cloud.gateway.routes[3].uri=http://course-service:8083
spring.cloud.gateway.routes[3].predicates[0]=Path=/courses/**
spring.cloud.gateway.routes[3].filters[0]=RewritePath=/courses/(?<segment>.*), /$\{segment}

# -------------------------
# billing-service (SoapCore)
# endpoint: /FacturationService.svc
# so we MUST strip /billing
# -------------------------
spring.cloud.gateway.routes[4].id=facturation-service
spring.cloud.gateway.routes[4].uri=http://billing-service:8085
spring.cloud.gateway.routes[4].predicates[0]=Path=/billing/**
spring.cloud.gateway.routes[4].filters[0]=RewritePath=/billing/(?<segment>.*), /$\{segment}
